{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SESI%20SENAI%202/Documents/2025/React/projetoreact/src/app/questionario/page.tsx"],"sourcesContent":["// app/questionario/page.tsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport ComponenteQuestao from '../../../components/ComponenteQuestao'; \r\n\r\n// src/app/questionario/page.tsx (trecho relevante)\r\n// ... imports ...\r\n\r\ninterface Alternativa {\r\n    texto: string;\r\n    correta: boolean;\r\n}\r\n\r\ninterface Questao {\r\n    id: number;\r\n    pergunta: string;\r\n    alternativas: Alternativa[];\r\n}\r\n\r\nexport default function PaginaQuestionario() {\r\n    const searchParams = useSearchParams();\r\n    const assunto = searchParams.get('assunto');\r\n    const [questoes, setQuestoes] = useState<Questao[]>([]);\r\n    const [respostasUsuario, setRespostasUsuario] = useState<number[]>([]);\r\n    const [mostrarResultado, setMostrarResultado] = useState(false);\r\n    const [pontuacao, setPontuacao] = useState(0);\r\n    const [carregando, setCarregando] = useState(true);\r\n    const [erro, setErro] = useState<string | null>(null);\r\n\r\n    // FUNÇÃO CRÍTICA: buscarQuestoes\r\n    const buscarQuestoes = useCallback(async () => {\r\n        if (!assunto) {\r\n            setErro(\"Assunto do livro não informado. Por favor, volte e informe um livro.\");\r\n            setCarregando(false);\r\n            return;\r\n        }\r\n\r\n        setCarregando(true);\r\n        setErro(null);\r\n\r\n        try {\r\n            // ESTA É A CHAMADA QUE PRECISA ACONTECER:\r\n            const response = await fetch('/api/gerar-questionario', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ assunto }),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.error || `Erro ao gerar questionário: ${response.statusText}`);\r\n            }\r\n\r\n            const data: Questao[] = await response.json();\r\n            const questoesLimitas = data.slice(0, 10);\r\n            setQuestoes(questoesLimitas);\r\n            setRespostasUsuario(new Array(questoesLimitas.length).fill(-1));\r\n        } catch (err: any) {\r\n            console.error(\"Falha ao buscar questões:\", err);\r\n            setErro(`Não foi possível gerar o questionário. Detalhes: ${err.message}`);\r\n        } finally {\r\n            setCarregando(false);\r\n        }\r\n    }, [assunto]); // <- IMPORTANTE: `assunto` como dependência\r\n\r\n    // HOOK CRÍTICO: useEffect para chamar buscarQuestoes\r\n    useEffect(() => {\r\n        buscarQuestoes(); // Chama a função aqui!\r\n    }, [buscarQuestoes]); // <- IMPORTANTE: `buscarQuestoes` como dependência\r\n\r\n    // ... restante do código (handleRespostaSelecionada, handleSubmit, retornos condicionais) ...\r\n}"],"names":[],"mappings":"AAAA,4BAA4B;;;;AAG5B;AACA;;AAHA;;;AAoBe,SAAS;;IACpB,MAAM,eAAe,CAAA,GAAA,qIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,UAAU,aAAa,GAAG,CAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAEhD,iCAAiC;IACjC,MAAM,iBAAiB;0DAAY;YAC/B,IAAI,CAAC,SAAS;gBACV,QAAQ;gBACR,cAAc;gBACd;YACJ;YAEA,cAAc;YACd,QAAQ;YAER,IAAI;gBACA,0CAA0C;gBAC1C,MAAM,WAAW,MAAM,MAAM,2BAA2B;oBACpD,QAAQ;oBACR,SAAS;wBACL,gBAAgB;oBACpB;oBACA,MAAM,KAAK,SAAS,CAAC;wBAAE;oBAAQ;gBACnC;gBAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBACd,MAAM,YAAY,MAAM,SAAS,IAAI;oBACrC,MAAM,IAAI,MAAM,UAAU,KAAK,IAAI,CAAC,4BAA4B,EAAE,SAAS,UAAU,EAAE;gBAC3F;gBAEA,MAAM,OAAkB,MAAM,SAAS,IAAI;gBAC3C,MAAM,kBAAkB,KAAK,KAAK,CAAC,GAAG;gBACtC,YAAY;gBACZ,oBAAoB,IAAI,MAAM,gBAAgB,MAAM,EAAE,IAAI,CAAC,CAAC;YAChE,EAAE,OAAO,KAAU;gBACf,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,QAAQ,CAAC,iDAAiD,EAAE,IAAI,OAAO,EAAE;YAC7E,SAAU;gBACN,cAAc;YAClB;QACJ;yDAAG;QAAC;KAAQ,GAAG,4CAA4C;IAE3D,qDAAqD;IACrD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;wCAAE;YACN,kBAAkB,uBAAuB;QAC7C;uCAAG;QAAC;KAAe,GAAG,mDAAmD;AAEzE,8FAA8F;AAClG;GAtDwB;;QACC,qIAAA,CAAA,kBAAe;;;KADhB","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SESI%20SENAI%202/Documents/2025/React/projetoreact/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}